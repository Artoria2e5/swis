<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Testing SWIS for JS</title>
  <link rel="stylesheet" href="qunit.css">
</head>
<body>
  <div id="qunit"></div>
  <script src="qunit.js"></script>
  <script src="msw.js"></script>

<script>

/**
 * Range 2 Regex
 */
module('R2R');  
test('range2regex_text', function() {
  var lo = 285,
    val = 460,
    hi = 635;
  var v = (val >= lo) && (val <= hi);
  var re = new RegExp(range2regex(lo,hi,0,1),"g");
  var sval = '' + val;
  var  result = sval.match(re);
  if (v){
    equal(result,val,lo + ' ' + val + ' ' + hi + ' for ' + re);
  } else {
    equal(result,null, 'not ' + lo + ' ' + val + ' ' + hi + ' for ' + re);
  }
});  

test('range2regex_dec', function() {
  var v, re, sval, result, 
    start = 250,
    end = 750,
    inc = 7;  //change increment for more detail, may be slow...
  for (var lo=start;lo<end;lo+=inc){
    for (var hi=lo;hi<end;hi+=inc){
      for (var val=start;val<end;val+=inc){
        v = (val >= lo) && (val <= hi);
        re = new RegExp(range2regex(lo,hi),"g");
        sval = '' + val;
        result = sval.match(re);
        if (v){
          equal(result,val,lo + ' ' + val + ' ' + hi + ' for ' + re);
        } else {
          equal(result,null, 'not ' + lo + ' ' + val + ' ' + hi + ' for ' + re);
        }
      }
    }
  }
});

test('range2regex_hex', function() {
  var v, re, sval, result, 
    start = hexdec('100'),
    end = hexdec('38c'),
    inc = 9;  //change increment for more detail, may be slow...
  for (var lo=start;lo<end;lo+=inc){
    for (var hi=lo;hi<end;hi+=inc){
      for (var val=start;val<end;val+=inc){
        v = (val >= lo) && (val <= hi);
        re = new RegExp(range2regex(dechex(lo),dechex(hi),1),"g");
        sval = '' + dechex(val);
        result = sval.match(re);
        if (v){
          equal(result,dechex(val),dechex(lo) + ' ' + dechex(val) + ' ' + dechex(hi) + ' for ' + re);
        } else {
          equal(result,null, 'not ' + dechex(lo) + ' ' + dechex(val) + ' ' + dechex(hi) + ' for ' + re);
        }
      }
    }
  }
});  

</script>
</body>
</html>
